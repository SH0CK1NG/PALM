nohup: ignoring input
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
Files already downloaded and verified
Files already downloaded and verified
ckpt loaded from /home/shaokun/PALM/checkpoints/CIFAR-110-resnet34-top5-palm-cache6-ema0.999-with-prototypes.pt
resnet34-top5-palm-cache6-ema0.999-baseline-randlabel-b128-e25-lr0.001-wd1e-4-fl1-CIFAR-100forget5: Number of model parameters: 21605312
Processing in-distribution CIFAR-100 images
  0%|          | 0/391 [00:00<?, ?it/s]  0%|          | 1/391 [00:01<07:28,  1.15s/it]  1%|▏         | 5/391 [00:01<01:20,  4.77it/s]  2%|▏         | 9/391 [00:01<00:42,  8.90it/s]  3%|▎         | 13/391 [00:01<00:28, 13.46it/s]  5%|▌         | 21/391 [00:01<00:15, 24.45it/s]  7%|▋         | 29/391 [00:01<00:10, 35.21it/s]  9%|▉         | 36/391 [00:01<00:08, 42.53it/s] 11%|█▏        | 44/391 [00:01<00:06, 51.35it/s] 13%|█▎        | 52/391 [00:02<00:05, 57.05it/s] 15%|█▌        | 59/391 [00:02<00:05, 59.37it/s] 17%|█▋        | 67/391 [00:02<00:05, 64.78it/s] 19%|█▉        | 75/391 [00:02<00:04, 66.56it/s] 21%|██        | 83/391 [00:02<00:04, 70.17it/s] 23%|██▎       | 91/391 [00:02<00:04, 70.73it/s] 25%|██▌       | 99/391 [00:02<00:04, 72.90it/s] 27%|██▋       | 107/391 [00:02<00:03, 71.92it/s] 29%|██▉       | 115/391 [00:02<00:03, 73.42it/s] 31%|███▏      | 123/391 [00:03<00:03, 73.39it/s] 34%|███▎      | 131/391 [00:03<00:03, 72.19it/s] 36%|███▌      | 139/391 [00:03<00:03, 74.19it/s] 38%|███▊      | 147/391 [00:03<00:03, 73.29it/s] 40%|███▉      | 155/391 [00:03<00:03, 74.93it/s] 42%|████▏     | 163/391 [00:03<00:03, 73.75it/s] 44%|████▎     | 171/391 [00:03<00:03, 67.19it/s] 46%|████▌     | 180/391 [00:03<00:02, 70.85it/s] 48%|████▊     | 188/391 [00:03<00:02, 71.79it/s] 50%|█████     | 196/391 [00:04<00:02, 73.98it/s] 52%|█████▏    | 204/391 [00:04<00:02, 73.44it/s] 54%|█████▍    | 212/391 [00:04<00:02, 74.83it/s] 56%|█████▋    | 220/391 [00:04<00:02, 73.83it/s] 58%|█████▊    | 228/391 [00:04<00:02, 75.10it/s] 60%|██████    | 236/391 [00:04<00:02, 64.77it/s] 62%|██████▏   | 243/391 [00:04<00:03, 48.81it/s] 64%|██████▎   | 249/391 [00:04<00:02, 50.30it/s] 65%|██████▌   | 256/391 [00:05<00:02, 54.74it/s] 68%|██████▊   | 265/391 [00:05<00:02, 61.83it/s] 70%|██████▉   | 273/391 [00:05<00:01, 64.67it/s] 72%|███████▏  | 281/391 [00:05<00:01, 68.37it/s] 74%|███████▍  | 289/391 [00:05<00:01, 68.64it/s] 76%|███████▌  | 297/391 [00:05<00:01, 71.22it/s] 78%|███████▊  | 305/391 [00:05<00:01, 71.94it/s] 80%|████████  | 314/391 [00:05<00:01, 73.95it/s] 82%|████████▏ | 322/391 [00:05<00:00, 74.33it/s] 84%|████████▍ | 330/391 [00:06<00:00, 72.44it/s] 86%|████████▋ | 338/391 [00:06<00:00, 72.34it/s] 89%|████████▊ | 347/391 [00:06<00:00, 75.04it/s] 91%|█████████ | 355/391 [00:06<00:00, 73.97it/s] 93%|█████████▎| 364/391 [00:06<00:00, 76.32it/s] 95%|█████████▌| 372/391 [00:06<00:00, 75.79it/s] 97%|█████████▋| 380/391 [00:06<00:00, 76.73it/s] 99%|█████████▉| 389/391 [00:06<00:00, 77.48it/s]100%|██████████| 391/391 [00:06<00:00, 56.78it/s]
50000 images processed, 6.998487234115601 seconds used

Processing in-distribution CIFAR-100 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:41,  1.90it/s] 10%|█         | 8/79 [00:00<00:04, 16.29it/s] 20%|██        | 16/79 [00:00<00:02, 30.23it/s] 30%|███       | 24/79 [00:00<00:01, 42.25it/s] 39%|███▉      | 31/79 [00:00<00:00, 49.40it/s] 49%|████▉     | 39/79 [00:01<00:00, 57.61it/s] 59%|█████▉    | 47/79 [00:01<00:00, 62.39it/s] 72%|███████▏  | 57/79 [00:01<00:00, 70.55it/s] 84%|████████▎ | 66/79 [00:01<00:00, 74.82it/s] 95%|█████████▍| 75/79 [00:01<00:00, 77.23it/s]100%|██████████| 79/79 [00:01<00:00, 49.96it/s]
10000 images processed, 1.6596767902374268 seconds used

Processing out-of-distribution SVHN images
  0%|          | 0/204 [00:00<?, ?it/s]  0%|          | 1/204 [00:00<02:03,  1.64it/s]  4%|▍         | 9/204 [00:00<00:11, 16.32it/s]  8%|▊         | 17/204 [00:00<00:06, 29.11it/s] 12%|█▏        | 24/204 [00:00<00:04, 38.20it/s] 15%|█▌        | 31/204 [00:01<00:03, 44.84it/s] 19%|█▉        | 39/204 [00:01<00:03, 51.64it/s] 23%|██▎       | 47/204 [00:01<00:02, 58.18it/s] 26%|██▋       | 54/204 [00:01<00:02, 60.66it/s] 30%|██▉       | 61/204 [00:01<00:02, 51.56it/s] 33%|███▎      | 68/204 [00:01<00:02, 55.41it/s] 37%|███▋      | 76/204 [00:01<00:02, 60.98it/s] 41%|████      | 84/204 [00:01<00:01, 63.96it/s] 45%|████▌     | 92/204 [00:01<00:01, 66.49it/s] 49%|████▉     | 100/204 [00:02<00:01, 68.85it/s] 53%|█████▎    | 108/204 [00:02<00:01, 70.59it/s] 57%|█████▋    | 116/204 [00:02<00:01, 70.96it/s] 61%|██████    | 124/204 [00:02<00:01, 73.30it/s] 65%|██████▍   | 132/204 [00:02<00:00, 72.14it/s] 69%|██████▊   | 140/204 [00:02<00:00, 71.79it/s] 73%|███████▎  | 148/204 [00:02<00:00, 73.82it/s] 76%|███████▋  | 156/204 [00:02<00:00, 73.25it/s] 80%|████████  | 164/204 [00:02<00:00, 73.60it/s] 84%|████████▍ | 172/204 [00:03<00:00, 74.28it/s] 88%|████████▊ | 180/204 [00:03<00:00, 72.85it/s] 92%|█████████▏| 188/204 [00:03<00:00, 74.46it/s] 96%|█████████▌| 196/204 [00:03<00:00, 74.41it/s]100%|██████████| 204/204 [00:03<00:00, 74.88it/s]100%|██████████| 204/204 [00:03<00:00, 58.49it/s]
26032 images processed, 3.5304768085479736 seconds used

Processing out-of-distribution places365 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:58,  1.33it/s] 11%|█▏        | 9/79 [00:00<00:05, 13.68it/s] 22%|██▏       | 17/79 [00:00<00:02, 25.80it/s] 32%|███▏      | 25/79 [00:01<00:01, 35.41it/s] 42%|████▏     | 33/79 [00:01<00:01, 44.25it/s] 52%|█████▏    | 41/79 [00:01<00:00, 51.25it/s] 62%|██████▏   | 49/79 [00:01<00:00, 58.16it/s] 72%|███████▏  | 57/79 [00:01<00:00, 61.80it/s] 82%|████████▏ | 65/79 [00:01<00:00, 66.02it/s] 92%|█████████▏| 73/79 [00:01<00:00, 68.07it/s]100%|██████████| 79/79 [00:01<00:00, 42.81it/s]
10000 images processed, 1.9285192489624023 seconds used

Processing out-of-distribution LSUN images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<01:11,  1.10it/s]  6%|▋         | 5/79 [00:01<00:11,  6.36it/s] 14%|█▍        | 11/79 [00:01<00:04, 14.81it/s] 23%|██▎       | 18/79 [00:01<00:02, 24.88it/s] 32%|███▏      | 25/79 [00:01<00:01, 34.07it/s] 42%|████▏     | 33/79 [00:01<00:01, 44.29it/s] 52%|█████▏    | 41/79 [00:01<00:00, 52.20it/s] 62%|██████▏   | 49/79 [00:01<00:00, 57.97it/s] 73%|███████▎  | 58/79 [00:01<00:00, 64.65it/s] 84%|████████▎ | 66/79 [00:01<00:00, 66.85it/s] 95%|█████████▍| 75/79 [00:01<00:00, 70.64it/s]100%|██████████| 79/79 [00:02<00:00, 38.98it/s]
10000 images processed, 2.0435984134674072 seconds used

Processing out-of-distribution iSUN images
  0%|          | 0/70 [00:00<?, ?it/s]  1%|▏         | 1/70 [00:00<00:52,  1.30it/s] 11%|█▏        | 8/70 [00:00<00:05, 11.87it/s] 20%|██        | 14/70 [00:00<00:02, 20.27it/s] 27%|██▋       | 19/70 [00:01<00:02, 23.72it/s] 37%|███▋      | 26/70 [00:01<00:01, 33.23it/s] 46%|████▌     | 32/70 [00:01<00:01, 32.09it/s] 53%|█████▎    | 37/70 [00:01<00:01, 31.02it/s] 61%|██████▏   | 43/70 [00:01<00:00, 36.85it/s] 73%|███████▎  | 51/70 [00:01<00:00, 45.72it/s] 84%|████████▍ | 59/70 [00:01<00:00, 52.60it/s] 96%|█████████▌| 67/70 [00:02<00:00, 59.41it/s]100%|██████████| 70/70 [00:02<00:00, 33.65it/s]
8925 images processed, 2.1390433311462402 seconds used

Processing out-of-distribution dtd images
  0%|          | 0/45 [00:00<?, ?it/s]  2%|▏         | 1/45 [00:01<00:51,  1.17s/it]  7%|▋         | 3/45 [00:01<00:14,  2.88it/s] 24%|██▍       | 11/45 [00:01<00:02, 13.02it/s] 38%|███▊      | 17/45 [00:01<00:01, 14.15it/s] 51%|█████     | 23/45 [00:02<00:01, 14.48it/s] 69%|██████▉   | 31/45 [00:02<00:00, 22.38it/s] 80%|████████  | 36/45 [00:02<00:00, 20.88it/s] 89%|████████▉ | 40/45 [00:02<00:00, 22.46it/s]100%|██████████| 45/45 [00:02<00:00, 16.26it/s]
5640 images processed, 2.789872169494629 seconds used

23.024699926376343
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/umap/umap_.py:1952: UserWarning: n_jobs value 1 overridden to 1 by setting random_state. Use no seed for parallelism.
  warn(
Evaluating SVHN
Evaluating places365
Evaluating LSUN
Evaluating iSUN
Evaluating dtd
 OOD detection method: SSD+
              FPR    AUROC  AUIN  
SVHN           2.96  99.24  97.65
places365     73.06  78.97  77.59
LSUN           9.35  97.95  97.91
iSUN          71.91  82.49  84.92
dtd           48.78  87.90  92.29
AVG           41.21  89.31  90.07
[incremental] Overall: nan New: nan Old: nan
7.51309609413147
[umap] saved to figs/umap_CIFAR-100_resnet34_top5-palm-cache6-ema0.999-baseline-randlabel-b128-e25-lr0.001-wd1e-4-fl1-CIFAR-100forget5_domain.png
