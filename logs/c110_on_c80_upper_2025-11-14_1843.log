nohup: ignoring input
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
Files already downloaded and verified
Files already downloaded and verified
ckpt loaded from /home/shaokun/PALM/checkpoints/CIFAR-110-resnet34-top5-palm-cache6-ema0.999-with-prototypes.pt
resnet34-top5-palm-cache6-ema0.999-baseline-randlabel-b128-e25-lr0.001-wd1e-4-fl1-CIFAR-100forget5: Number of model parameters: 21605312
Processing in-distribution CIFAR-100 images
  0%|          | 0/391 [00:00<?, ?it/s]  0%|          | 1/391 [00:00<04:26,  1.46it/s]  2%|▏         | 9/391 [00:00<00:25, 14.97it/s]  4%|▍         | 15/391 [00:00<00:15, 23.75it/s]  6%|▌         | 23/391 [00:01<00:10, 33.74it/s]  8%|▊         | 30/391 [00:01<00:08, 40.16it/s] 10%|▉         | 38/391 [00:01<00:07, 49.28it/s] 12%|█▏        | 46/391 [00:01<00:06, 54.83it/s] 14%|█▍        | 55/391 [00:01<00:05, 62.46it/s] 16%|█▌        | 63/391 [00:01<00:04, 65.78it/s] 18%|█▊        | 71/391 [00:01<00:05, 57.37it/s] 20%|█▉        | 78/391 [00:01<00:05, 59.07it/s] 22%|██▏       | 86/391 [00:01<00:04, 62.85it/s] 24%|██▍       | 94/391 [00:02<00:04, 65.75it/s] 26%|██▋       | 103/391 [00:02<00:04, 71.53it/s] 29%|██▉       | 113/391 [00:02<00:03, 78.40it/s] 31%|███       | 122/391 [00:02<00:03, 75.38it/s] 33%|███▎      | 130/391 [00:02<00:03, 75.79it/s] 35%|███▌      | 138/391 [00:02<00:03, 72.82it/s] 38%|███▊      | 147/391 [00:02<00:03, 76.32it/s] 40%|███▉      | 156/391 [00:02<00:02, 78.54it/s] 42%|████▏     | 164/391 [00:02<00:02, 77.59it/s] 44%|████▍     | 172/391 [00:03<00:03, 71.31it/s] 46%|████▋     | 181/391 [00:03<00:02, 74.38it/s] 49%|████▊     | 190/391 [00:03<00:02, 77.38it/s] 51%|█████     | 200/391 [00:03<00:02, 81.09it/s] 53%|█████▎    | 209/391 [00:03<00:02, 75.42it/s] 56%|█████▌    | 219/391 [00:03<00:02, 80.87it/s] 58%|█████▊    | 228/391 [00:03<00:01, 83.03it/s] 61%|██████    | 237/391 [00:03<00:01, 82.72it/s] 63%|██████▎   | 246/391 [00:03<00:01, 83.43it/s] 65%|██████▌   | 255/391 [00:04<00:01, 82.33it/s] 68%|██████▊   | 264/391 [00:04<00:01, 82.28it/s] 70%|██████▉   | 273/391 [00:04<00:01, 66.14it/s] 72%|███████▏  | 281/391 [00:04<00:01, 63.37it/s] 74%|███████▎  | 288/391 [00:04<00:01, 59.49it/s] 76%|███████▌  | 297/391 [00:04<00:01, 63.29it/s] 78%|███████▊  | 304/391 [00:04<00:01, 59.73it/s] 80%|███████▉  | 312/391 [00:05<00:01, 64.41it/s] 82%|████████▏ | 319/391 [00:05<00:01, 65.43it/s] 83%|████████▎ | 326/391 [00:05<00:01, 64.02it/s] 85%|████████▌ | 333/391 [00:05<00:01, 53.94it/s] 87%|████████▋ | 339/391 [00:05<00:00, 53.56it/s] 88%|████████▊ | 346/391 [00:05<00:00, 56.38it/s] 90%|█████████ | 352/391 [00:05<00:00, 54.73it/s] 92%|█████████▏| 358/391 [00:05<00:00, 55.73it/s] 94%|█████████▍| 368/391 [00:05<00:00, 66.16it/s] 97%|█████████▋| 379/391 [00:06<00:00, 76.52it/s]100%|█████████▉| 390/391 [00:06<00:00, 83.96it/s]100%|██████████| 391/391 [00:06<00:00, 62.75it/s]
50000 images processed, 6.348443269729614 seconds used

Processing in-distribution CIFAR-100 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<01:07,  1.15it/s]  8%|▊         | 6/79 [00:00<00:09,  7.92it/s] 18%|█▊        | 14/79 [00:01<00:03, 19.81it/s] 28%|██▊       | 22/79 [00:01<00:01, 31.04it/s] 37%|███▋      | 29/79 [00:01<00:01, 37.95it/s] 48%|████▊     | 38/79 [00:01<00:00, 48.71it/s] 57%|█████▋    | 45/79 [00:01<00:00, 52.22it/s] 70%|██████▉   | 55/79 [00:01<00:00, 62.83it/s] 84%|████████▎ | 66/79 [00:01<00:00, 73.36it/s] 97%|█████████▋| 77/79 [00:01<00:00, 81.10it/s]100%|██████████| 79/79 [00:01<00:00, 42.00it/s]
10000 images processed, 1.9640140533447266 seconds used

Processing out-of-distribution SVHN images
  0%|          | 0/204 [00:00<?, ?it/s]  0%|          | 1/204 [00:00<02:00,  1.68it/s]  3%|▎         | 7/204 [00:00<00:15, 12.95it/s]  8%|▊         | 17/204 [00:00<00:05, 31.27it/s] 13%|█▎        | 27/204 [00:00<00:03, 46.76it/s] 18%|█▊        | 36/204 [00:01<00:03, 55.52it/s] 23%|██▎       | 46/204 [00:01<00:02, 66.67it/s] 27%|██▋       | 56/204 [00:01<00:01, 74.25it/s] 32%|███▏      | 66/204 [00:01<00:01, 79.73it/s] 37%|███▋      | 76/204 [00:01<00:01, 84.12it/s] 42%|████▏     | 86/204 [00:01<00:01, 88.16it/s] 47%|████▋     | 96/204 [00:01<00:01, 90.98it/s] 52%|█████▏    | 106/204 [00:01<00:01, 88.89it/s] 57%|█████▋    | 116/204 [00:01<00:01, 86.78it/s] 62%|██████▏   | 126/204 [00:01<00:00, 89.74it/s] 67%|██████▋   | 136/204 [00:02<00:00, 73.97it/s] 71%|███████   | 144/204 [00:02<00:00, 72.74it/s] 75%|███████▌  | 153/204 [00:02<00:00, 75.54it/s] 80%|███████▉  | 163/204 [00:02<00:00, 80.95it/s] 85%|████████▍ | 173/204 [00:02<00:00, 85.94it/s] 90%|█████████ | 184/204 [00:02<00:00, 90.51it/s] 96%|█████████▌| 195/204 [00:02<00:00, 93.80it/s]100%|██████████| 204/204 [00:02<00:00, 70.00it/s]
26032 images processed, 2.9508237838745117 seconds used

Processing out-of-distribution places365 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:56,  1.37it/s] 13%|█▎        | 10/79 [00:00<00:04, 15.79it/s] 25%|██▌       | 20/79 [00:00<00:01, 31.49it/s] 35%|███▌      | 28/79 [00:01<00:01, 36.49it/s] 44%|████▍     | 35/79 [00:01<00:01, 42.95it/s] 57%|█████▋    | 45/79 [00:01<00:00, 55.44it/s] 70%|██████▉   | 55/79 [00:01<00:00, 66.19it/s] 81%|████████  | 64/79 [00:01<00:00, 70.33it/s] 92%|█████████▏| 73/79 [00:01<00:00, 62.34it/s]100%|██████████| 79/79 [00:01<00:00, 43.64it/s]
10000 images processed, 1.9238691329956055 seconds used

Processing out-of-distribution LSUN images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:45,  1.73it/s] 11%|█▏        | 9/79 [00:00<00:04, 17.16it/s] 24%|██▍       | 19/79 [00:00<00:01, 35.00it/s] 37%|███▋      | 29/79 [00:00<00:00, 50.40it/s] 49%|████▉     | 39/79 [00:00<00:00, 62.64it/s] 62%|██████▏   | 49/79 [00:01<00:00, 71.64it/s] 75%|███████▍  | 59/79 [00:01<00:00, 79.25it/s] 89%|████████▊ | 70/79 [00:01<00:00, 85.72it/s]100%|██████████| 79/79 [00:01<00:00, 57.08it/s]
10000 images processed, 1.4047999382019043 seconds used

Processing out-of-distribution iSUN images
  0%|          | 0/70 [00:00<?, ?it/s]  1%|▏         | 1/70 [00:00<00:36,  1.88it/s] 16%|█▌        | 11/70 [00:00<00:02, 22.40it/s] 30%|███       | 21/70 [00:00<00:01, 39.85it/s] 44%|████▍     | 31/70 [00:00<00:00, 54.37it/s] 59%|█████▊    | 41/70 [00:00<00:00, 66.12it/s] 74%|███████▍  | 52/70 [00:01<00:00, 76.19it/s] 90%|█████████ | 63/70 [00:01<00:00, 83.52it/s]100%|██████████| 70/70 [00:01<00:00, 56.79it/s]
8925 images processed, 1.2686190605163574 seconds used

Processing out-of-distribution dtd images
  0%|          | 0/45 [00:00<?, ?it/s]  2%|▏         | 1/45 [00:01<01:00,  1.38s/it]  4%|▍         | 2/45 [00:01<00:29,  1.47it/s] 27%|██▋       | 12/45 [00:01<00:02, 12.23it/s] 38%|███▊      | 17/45 [00:02<00:02, 13.14it/s] 47%|████▋     | 21/45 [00:02<00:01, 15.26it/s] 60%|██████    | 27/45 [00:02<00:00, 21.45it/s] 73%|███████▎  | 33/45 [00:02<00:00, 16.43it/s] 80%|████████  | 36/45 [00:02<00:00, 17.55it/s]100%|██████████| 45/45 [00:03<00:00, 27.68it/s]100%|██████████| 45/45 [00:03<00:00, 14.80it/s]
5640 images processed, 3.0844123363494873 seconds used

20.952908992767334
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/umap/umap_.py:1952: UserWarning: n_jobs value 1 overridden to 1 by setting random_state. Use no seed for parallelism.
  warn(
Evaluating SVHN
Evaluating places365
Evaluating LSUN
Evaluating iSUN
Evaluating dtd
 OOD detection method: SSD+
              FPR    AUROC  AUIN  
SVHN           3.37  99.10  97.21
places365     72.63  79.32  78.28
LSUN          12.07  97.17  97.01
iSUN          72.99  82.28  85.00
dtd           51.97  86.71  91.66
AVG           42.61  88.92  89.84
Retain-Acc: 0.7486
17.202694416046143
[umap] saved to figs/umap_CIFAR-100_resnet34_top5-palm-cache6-ema0.999-baseline-randlabel-b128-e25-lr0.001-wd1e-4-fl1-CIFAR-100forget5_domain.png
