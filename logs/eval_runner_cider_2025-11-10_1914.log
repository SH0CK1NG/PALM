nohup: ignoring input
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
Files already downloaded and verified
Files already downloaded and verified
[ckpt] unexpected keys: ['fc.weight', 'fc.bias']
ckpt loaded from /home/shaokun/cider-master/checkpoints/CIFAR-100/30_10_18:17_cider_resnet34_lr_0.5_cosine_True_bsz_512_cider_wd_1.0_500_128_trial_0_temp_0.1_CIFAR-100_pm_0.5/checkpoint_500.pth.tar
[peft] adapter loaded from checkpoints/CIFAR-100-resnet34-test-palm-cider-b128-e50-lr0.001-wd1e-4-fd128-w1-pm0.999-temp0.08-bfmbalanced-fl0.2-adapter
[peft] active adapters set to: default
resnet34-test-palm-cider-b128-e50-lr0.001-wd1e-4-fd128-w1-pm0.999-temp0.08-bfmbalanced-fl0.2: Number of model parameters: 21843904
Processing in-distribution CIFAR-100 images
  0%|          | 0/391 [00:00<?, ?it/s]  0%|          | 1/391 [00:02<13:50,  2.13s/it]  2%|▏         | 6/391 [00:02<01:50,  3.49it/s]  3%|▎         | 11/391 [00:02<00:53,  7.13it/s]  4%|▍         | 16/391 [00:02<00:32, 11.39it/s]  5%|▌         | 21/391 [00:02<00:23, 16.09it/s]  7%|▋         | 26/391 [00:02<00:17, 20.94it/s]  8%|▊         | 31/391 [00:02<00:14, 25.68it/s]  9%|▉         | 36/391 [00:02<00:11, 30.01it/s] 10%|█         | 41/391 [00:03<00:10, 33.75it/s] 12%|█▏        | 46/391 [00:03<00:09, 36.82it/s] 13%|█▎        | 51/391 [00:03<00:08, 39.26it/s] 14%|█▍        | 56/391 [00:03<00:08, 41.11it/s] 16%|█▌        | 61/391 [00:03<00:07, 42.51it/s] 17%|█▋        | 66/391 [00:03<00:07, 43.26it/s] 18%|█▊        | 71/391 [00:03<00:07, 44.09it/s] 19%|█▉        | 76/391 [00:03<00:07, 44.68it/s] 21%|██        | 81/391 [00:03<00:06, 45.14it/s] 22%|██▏       | 87/391 [00:04<00:06, 48.38it/s] 24%|██▎       | 92/391 [00:04<00:06, 48.41it/s] 25%|██▍       | 97/391 [00:04<00:06, 47.71it/s] 26%|██▌       | 102/391 [00:04<00:06, 47.23it/s] 27%|██▋       | 107/391 [00:04<00:06, 46.91it/s] 29%|██▊       | 112/391 [00:04<00:05, 46.66it/s] 30%|██▉       | 117/391 [00:04<00:05, 46.50it/s] 31%|███       | 122/391 [00:04<00:05, 46.41it/s] 32%|███▏      | 127/391 [00:04<00:05, 46.34it/s] 34%|███▍      | 132/391 [00:04<00:05, 46.28it/s] 35%|███▌      | 137/391 [00:05<00:05, 46.24it/s] 36%|███▋      | 142/391 [00:05<00:05, 46.40it/s] 38%|███▊      | 147/391 [00:05<00:05, 46.30it/s] 39%|███▉      | 152/391 [00:05<00:05, 46.20it/s] 40%|████      | 157/391 [00:05<00:05, 46.20it/s] 41%|████▏     | 162/391 [00:05<00:04, 46.17it/s] 43%|████▎     | 167/391 [00:05<00:04, 46.14it/s] 44%|████▍     | 172/391 [00:05<00:04, 46.14it/s] 45%|████▌     | 177/391 [00:05<00:04, 46.12it/s] 47%|████▋     | 182/391 [00:06<00:04, 46.10it/s] 48%|████▊     | 187/391 [00:06<00:04, 46.10it/s] 50%|████▉     | 194/391 [00:06<00:03, 49.98it/s] 51%|█████     | 200/391 [00:06<00:03, 50.88it/s] 53%|█████▎    | 206/391 [00:06<00:03, 49.30it/s] 54%|█████▍    | 211/391 [00:06<00:03, 48.41it/s] 55%|█████▌    | 216/391 [00:06<00:03, 47.74it/s] 57%|█████▋    | 221/391 [00:06<00:03, 47.26it/s] 58%|█████▊    | 226/391 [00:06<00:03, 46.95it/s] 59%|█████▉    | 231/391 [00:07<00:03, 46.70it/s] 60%|██████    | 236/391 [00:07<00:03, 46.53it/s] 62%|██████▏   | 241/391 [00:07<00:03, 46.41it/s] 63%|██████▎   | 246/391 [00:07<00:03, 46.32it/s] 64%|██████▍   | 251/391 [00:07<00:03, 46.29it/s] 65%|██████▌   | 256/391 [00:07<00:02, 46.27it/s] 67%|██████▋   | 261/391 [00:07<00:02, 46.22it/s] 68%|██████▊   | 266/391 [00:07<00:02, 46.19it/s] 69%|██████▉   | 271/391 [00:07<00:02, 46.13it/s] 71%|███████   | 276/391 [00:08<00:02, 46.14it/s] 72%|███████▏  | 281/391 [00:08<00:02, 46.11it/s] 73%|███████▎  | 286/391 [00:08<00:02, 46.17it/s] 74%|███████▍  | 291/391 [00:08<00:02, 46.16it/s] 76%|███████▌  | 296/391 [00:08<00:02, 46.14it/s] 77%|███████▋  | 302/391 [00:08<00:01, 48.67it/s] 79%|███████▉  | 308/391 [00:08<00:01, 49.68it/s] 80%|████████  | 313/391 [00:08<00:01, 49.29it/s] 81%|████████▏ | 318/391 [00:08<00:01, 48.35it/s] 83%|████████▎ | 323/391 [00:09<00:01, 47.69it/s] 84%|████████▍ | 328/391 [00:09<00:01, 47.22it/s] 85%|████████▌ | 333/391 [00:09<00:01, 46.88it/s] 86%|████████▋ | 338/391 [00:09<00:01, 46.12it/s] 88%|████████▊ | 343/391 [00:09<00:01, 44.76it/s] 89%|████████▉ | 348/391 [00:09<00:01, 42.57it/s] 90%|█████████ | 353/391 [00:09<00:00, 42.15it/s] 92%|█████████▏| 358/391 [00:09<00:00, 42.43it/s] 93%|█████████▎| 363/391 [00:09<00:00, 43.20it/s] 94%|█████████▍| 368/391 [00:10<00:00, 44.03it/s] 95%|█████████▌| 373/391 [00:10<00:00, 44.62it/s] 97%|█████████▋| 378/391 [00:10<00:00, 45.09it/s] 98%|█████████▊| 383/391 [00:10<00:00, 45.40it/s] 99%|█████████▉| 388/391 [00:10<00:00, 45.58it/s]100%|██████████| 391/391 [00:10<00:00, 36.98it/s]
50000 images processed, 10.656205654144287 seconds used

Processing in-distribution CIFAR-100 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:31,  2.46it/s]  8%|▊         | 6/79 [00:00<00:05, 14.50it/s] 14%|█▍        | 11/79 [00:00<00:02, 23.42it/s] 20%|██        | 16/79 [00:00<00:02, 29.94it/s] 27%|██▋       | 21/79 [00:00<00:01, 34.67it/s] 33%|███▎      | 26/79 [00:00<00:01, 38.04it/s] 39%|███▉      | 31/79 [00:01<00:01, 40.43it/s] 46%|████▌     | 36/79 [00:01<00:01, 42.10it/s] 52%|█████▏    | 41/79 [00:01<00:00, 43.32it/s] 58%|█████▊    | 46/79 [00:01<00:00, 44.14it/s] 65%|██████▍   | 51/79 [00:01<00:00, 44.73it/s] 71%|███████   | 56/79 [00:01<00:00, 44.58it/s] 77%|███████▋  | 61/79 [00:01<00:00, 45.03it/s] 84%|████████▎ | 66/79 [00:01<00:00, 45.35it/s] 90%|████████▉ | 71/79 [00:01<00:00, 45.59it/s] 96%|█████████▌| 76/79 [00:02<00:00, 45.72it/s]100%|██████████| 79/79 [00:02<00:00, 37.67it/s]
10000 images processed, 2.1260743141174316 seconds used

Processing out-of-distribution SVHN images
  0%|          | 0/204 [00:00<?, ?it/s]  0%|          | 1/204 [00:00<01:23,  2.43it/s]  3%|▎         | 6/204 [00:00<00:14, 13.98it/s]  5%|▌         | 11/204 [00:00<00:08, 22.18it/s]  8%|▊         | 16/204 [00:00<00:06, 27.98it/s] 10%|█         | 21/204 [00:00<00:05, 32.06it/s] 13%|█▎        | 26/204 [00:01<00:05, 34.92it/s] 15%|█▌        | 31/204 [00:01<00:04, 36.98it/s] 18%|█▊        | 36/204 [00:01<00:04, 38.40it/s] 20%|██        | 41/204 [00:01<00:04, 39.39it/s] 24%|██▍       | 49/204 [00:01<00:03, 47.83it/s] 27%|██▋       | 55/204 [00:01<00:03, 49.31it/s] 30%|██▉       | 61/204 [00:01<00:03, 46.69it/s] 32%|███▏      | 66/204 [00:01<00:03, 45.24it/s] 35%|███▍      | 71/204 [00:01<00:03, 44.22it/s] 37%|███▋      | 76/204 [00:02<00:02, 43.47it/s] 40%|███▉      | 81/204 [00:02<00:02, 42.96it/s] 42%|████▏     | 86/204 [00:02<00:02, 42.57it/s] 45%|████▍     | 91/204 [00:02<00:02, 42.34it/s] 47%|████▋     | 96/204 [00:02<00:02, 42.14it/s] 50%|████▉     | 101/204 [00:02<00:02, 42.23it/s] 52%|█████▏    | 106/204 [00:02<00:02, 42.03it/s] 54%|█████▍    | 111/204 [00:02<00:02, 41.97it/s] 57%|█████▋    | 116/204 [00:03<00:02, 41.91it/s] 59%|█████▉    | 121/204 [00:03<00:01, 41.88it/s] 62%|██████▏   | 126/204 [00:03<00:01, 41.81it/s] 64%|██████▍   | 131/204 [00:03<00:01, 41.80it/s] 67%|██████▋   | 136/204 [00:03<00:01, 41.79it/s] 70%|██████▉   | 142/204 [00:03<00:01, 46.20it/s] 72%|███████▏  | 147/204 [00:03<00:01, 45.16it/s] 75%|███████▍  | 152/204 [00:03<00:01, 44.85it/s] 77%|███████▋  | 157/204 [00:03<00:01, 43.89it/s] 79%|███████▉  | 162/204 [00:04<00:00, 43.22it/s] 82%|████████▏ | 167/204 [00:04<00:00, 42.73it/s] 84%|████████▍ | 172/204 [00:04<00:00, 42.35it/s] 87%|████████▋ | 177/204 [00:04<00:00, 42.21it/s] 89%|████████▉ | 182/204 [00:04<00:00, 42.05it/s] 92%|█████████▏| 187/204 [00:04<00:00, 41.94it/s] 94%|█████████▍| 192/204 [00:04<00:00, 42.00it/s] 97%|█████████▋| 197/204 [00:04<00:00, 41.91it/s] 99%|█████████▉| 202/204 [00:05<00:00, 41.86it/s]100%|██████████| 204/204 [00:05<00:00, 39.90it/s]
26032 images processed, 5.1469666957855225 seconds used

Processing out-of-distribution places365 images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:48,  1.61it/s]  8%|▊         | 6/79 [00:00<00:07, 10.30it/s] 13%|█▎        | 10/79 [00:00<00:04, 16.03it/s] 18%|█▊        | 14/79 [00:00<00:03, 20.69it/s] 23%|██▎       | 18/79 [00:01<00:02, 25.03it/s] 29%|██▉       | 23/79 [00:01<00:01, 29.79it/s] 35%|███▌      | 28/79 [00:01<00:01, 33.34it/s] 42%|████▏     | 33/79 [00:01<00:01, 35.79it/s] 48%|████▊     | 38/79 [00:01<00:01, 37.54it/s] 54%|█████▍    | 43/79 [00:01<00:00, 38.78it/s] 61%|██████    | 48/79 [00:01<00:00, 39.63it/s] 67%|██████▋   | 53/79 [00:01<00:00, 40.26it/s] 73%|███████▎  | 58/79 [00:02<00:00, 40.70it/s] 80%|███████▉  | 63/79 [00:02<00:00, 41.01it/s] 87%|████████▋ | 69/79 [00:02<00:00, 45.69it/s] 94%|█████████▎| 74/79 [00:02<00:00, 44.77it/s]100%|██████████| 79/79 [00:02<00:00, 32.03it/s]
10000 images processed, 2.485391139984131 seconds used

Processing out-of-distribution LSUN images
  0%|          | 0/79 [00:00<?, ?it/s]  1%|▏         | 1/79 [00:00<00:35,  2.22it/s]  6%|▋         | 5/79 [00:00<00:06, 11.04it/s] 13%|█▎        | 10/79 [00:00<00:03, 19.82it/s] 19%|█▉        | 15/79 [00:00<00:02, 26.18it/s] 25%|██▌       | 20/79 [00:00<00:01, 30.75it/s] 32%|███▏      | 25/79 [00:01<00:01, 33.98it/s] 38%|███▊      | 30/79 [00:01<00:01, 36.28it/s] 44%|████▍     | 35/79 [00:01<00:01, 37.89it/s] 51%|█████     | 40/79 [00:01<00:00, 39.02it/s] 57%|█████▋    | 45/79 [00:01<00:00, 39.82it/s] 63%|██████▎   | 50/79 [00:01<00:00, 40.39it/s] 70%|██████▉   | 55/79 [00:01<00:00, 40.79it/s] 77%|███████▋  | 61/79 [00:01<00:00, 45.69it/s] 84%|████████▎ | 66/79 [00:01<00:00, 44.77it/s] 90%|████████▉ | 71/79 [00:02<00:00, 44.13it/s] 96%|█████████▌| 76/79 [00:02<00:00, 43.68it/s]100%|██████████| 79/79 [00:02<00:00, 34.86it/s]
10000 images processed, 2.285818576812744 seconds used

Processing out-of-distribution iSUN images
  0%|          | 0/70 [00:00<?, ?it/s]  1%|▏         | 1/70 [00:00<00:30,  2.23it/s]  7%|▋         | 5/70 [00:00<00:05, 11.26it/s] 14%|█▍        | 10/70 [00:00<00:02, 20.10it/s] 21%|██▏       | 15/70 [00:00<00:02, 26.45it/s] 29%|██▊       | 20/70 [00:00<00:01, 31.11it/s] 36%|███▌      | 25/70 [00:01<00:01, 34.26it/s] 43%|████▎     | 30/70 [00:01<00:01, 36.50it/s] 50%|█████     | 35/70 [00:01<00:00, 38.07it/s] 57%|█████▋    | 40/70 [00:01<00:00, 39.16it/s] 64%|██████▍   | 45/70 [00:01<00:00, 39.92it/s] 71%|███████▏  | 50/70 [00:01<00:00, 40.45it/s] 79%|███████▊  | 55/70 [00:01<00:00, 40.82it/s] 86%|████████▌ | 60/70 [00:01<00:00, 41.08it/s] 94%|█████████▍| 66/70 [00:01<00:00, 45.77it/s]100%|██████████| 70/70 [00:02<00:00, 33.93it/s]
8925 images processed, 2.0916244983673096 seconds used

Processing out-of-distribution dtd images
  0%|          | 0/45 [00:00<?, ?it/s]  2%|▏         | 1/45 [00:00<00:38,  1.13it/s]  4%|▍         | 2/45 [00:01<00:18,  2.30it/s] 16%|█▌        | 7/45 [00:01<00:03,  9.72it/s] 27%|██▋       | 12/45 [00:01<00:02, 16.50it/s] 38%|███▊      | 17/45 [00:01<00:01, 22.36it/s] 47%|████▋     | 21/45 [00:01<00:01, 20.10it/s] 58%|█████▊    | 26/45 [00:01<00:00, 25.01it/s] 69%|██████▉   | 31/45 [00:01<00:00, 29.20it/s] 78%|███████▊  | 35/45 [00:02<00:00, 26.39it/s] 87%|████████▋ | 39/45 [00:02<00:00, 28.14it/s] 98%|█████████▊| 44/45 [00:02<00:00, 31.82it/s]100%|██████████| 45/45 [00:02<00:00, 19.75it/s]
5640 images processed, 2.299159049987793 seconds used

28.621273517608643
/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: '/home/shaokun/anaconda3/envs/CILPALM/lib/python3.10/site-packages/torchvision/image.so: undefined symbol: _ZN3c1017RegisterOperatorsD1Ev'If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(
Evaluating SVHN
Evaluating places365
Evaluating LSUN
Evaluating iSUN
Evaluating dtd
 OOD detection method: SSD+
              FPR    AUROC  AUIN  
SVHN          20.89  94.80  86.66
places365     81.16  75.27  75.02
LSUN          36.86  92.11  92.17
iSUN          71.27  82.20  84.89
dtd           44.01  89.64  93.32
AVG           50.84  86.81  86.41
Retain-Acc: 0.7157
7.1408867835998535
